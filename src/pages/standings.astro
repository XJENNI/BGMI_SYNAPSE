---
// Import your JSON data
import allTeamsData from '../data/teams.json';

// --- LOGIC: Filter & Sort ---
// 1. Filter: Show teams that have played matches (Group B in your data)
//    (If you specifically want Group A, change filter to: team.group === 'A')
const leaderboardData = allTeamsData
  .filter((team) => team.stats.overall.matches_played > 0)
  .sort((a, b) => {
    // 2. Sort: Highest Total Points first
    if (b.stats.overall.total_pts !== a.stats.overall.total_pts) {
      return b.stats.overall.total_pts - a.stats.overall.total_pts;
    }
    // 3. Tie-Breaker: Highest Kills (Finish Pts)
    return b.stats.overall.finish_pts - a.stats.overall.finish_pts;
  });

const matches = ['M1', 'M2', 'M3', 'M4'];
---

<div class="leaderboard-wrapper">
  <header class="leaderboard-header">
    <h2>üèÜ Official Tournament Standings (Final)</h2>
    <p>Matches 1-4 Combined</p>
  </header>

  <div class="table-container">
    <table>
      <thead>
        <tr>
          <th class="rank">Rank</th>
          <th class="team">Official Team Name</th>
          {matches.map((m) => <th class="match">{m} Pts</th>)}
          <th class="total">Total Points</th>
          <th class="kills">Total Kills</th>
        </tr>
      </thead>
      <tbody>
        {leaderboardData.map((team, index) => (
          <tr class={`rank-${index + 1}`}>
            <td class="rank">#{index + 1}</td>
            <td class="team">
              <span class="team-name">{team.team_name}</span>
            </td>
            {matches.map((m) => (
              <td class="match">{team.stats.day1[m]?.total || 0}</td>
            ))}
            <td class="total">{team.stats.overall.total_pts}</td>
            <td class="kills">{team.stats.overall.finish_pts}</td>
          </tr>
        ))}
      </tbody>
    </table>
  </div>
</div>

<style>
  /* --- DARK THEME STYLING --- */
  .leaderboard-wrapper {
    background-color: #0d0d0d;
    color: #e5e5e5;
    padding: 2rem;
    font-family: system-ui, -apple-system, sans-serif;
    border-radius: 12px;
  }

  .leaderboard-header {
    margin-bottom: 1.5rem;
    border-bottom: 1px solid #333;
    padding-bottom: 1rem;
  }

  .leaderboard-header h2 {
    color: #ffd700;
    margin: 0;
    font-size: 1.8rem;
  }

  .table-container {
    overflow-x: auto;
  }

  table {
    width: 100%;
    border-collapse: collapse;
    min-width: 600px;
  }

  th {
    background: #1a1a1a;
    padding: 1rem;
    text-align: center;
    font-weight: 600;
    color: #888;
    text-transform: uppercase;
    font-size: 0.85rem;
  }

  th.team { text-align: left; padding-left: 1.5rem; }
  th.total { color: #fff; }

  td {
    padding: 0.8rem 1rem;
    text-align: center;
    border-bottom: 1px solid #262626;
  }

  td.team {
    text-align: left;
    padding-left: 1.5rem;
    font-weight: bold;
    color: #fff;
  }

  td.total {
    font-weight: 800;
    color: #4ade80; /* Green */
    font-size: 1.1rem;
  }

  td.kills {
    color: #f87171; /* Red */
  }

  /* Rank Colors */
  .rank-1 .rank { color: #ffd700; } /* Gold */
  .rank-2 .rank { color: #c0c0c0; } /* Silver */
  .rank-3 .rank { color: #cd7f32; } /* Bronze */
  
  /* Hover row */
  tbody tr:hover {
    background-color: #1a1a1a;
  }
</style>
